extends layout

include utils.pug

append head
  script(src="/javascripts/index.js" type="module" defer)

block content
    div(id='welcome_container')
      div(class='welcome-user-container')
        img(class='welcome-user-image' src=`${locals.user.profile_picture}`, alt=`${locals.user.user_name}`)
        div(class='welcome-user') #{locals.user.user_name}
      h1(class='my-questions-title')= title

    div(class='questions-container')
      div(class='question-container' id=`question-container-${question.id}`)
        div(class='question-offset')
          div(class='user-text')
            img(class='user-text-picture' src=`${question.User.profile_picture}`, alt=`${question.User.user_name}`)
            div(class='userName-container')  
              div(class='userName')= question.User.user_name
              div(class='date')= question.date
          div(class='question-text')  
            div(class='question-text-single') #{question.title}
          div(class='question-buttons')
            div(class='vote-section')
              button(class='upvote-question-button' id= `${question.id}`)
                i(class="fa fa-thumbs-up")
              div(class='vote_holder voteNum')= question.Questions_votes.length
            //- div(class='answer-delete-section')
            //-   div
            //-     button(class='answer-button' id=`${question.id}`)
            //-       i(class="far fa-comment answer")
            if locals.user.user_name === question.User.user_name
              button(class="edit-question-button editBtn questionEditBtn")
                i(class="fas fa-edit")
              button(class='delete-question-button' id=`${question.id}`)
                i(class="fas fa-trash-alt")
        div(class=`question-edit-contain answerContain` id=`${question.id}`)
          img(class='user-text-picture' src=`${locals.user.profile_picture}`, alt=`${locals.user.user_name}`)
          form(class='answerContain-form' action=`/questions/${question.id}` method='post')
            input(type='hidden' name='_csrf' value=token)
            +field('', 'title', '', 'text')
            button(type='submit', class='edit-submit-button') Edit Question
          //- div(class='answerContain' id=`${question.id}`)
          //-   form(action=`/questions/${question.id}/answers` method='post')
          //-       input(type='hidden' name='_csrf' value=token)
          //-       +field('', 'content', '', 'text', 'Add a comment...')
          //-       div
          //-         button(type='submit' class='answer-submit-button') Add commnet
        div(class='answers-container')
          if answers && answers.length > 0
            each answer in answers
              div(class='answer-container')
                div(class='user-text')
                  img(class='user-text-picture' src=`${answer.User.profile_picture}`, alt=`${answer.User.user_name}`)
                  div(class='userName-container')  
                    div(class='userName' )= answer.User.user_name
                    div(class='date')= answer.date
                div(id="answerContent" class='answer-text')= answer.content
                div(class='answer-buttons')
                  div(class='vote-section')
                    button(class='upvote-answer-button' id=`UQ/${answer.id}`)
                      i(class="fa fa-thumbs-up")
                    div(class='voteNum' id=`answer-vote-holder-UQ/${answer.id}`)= answer.Answers_votes.length
