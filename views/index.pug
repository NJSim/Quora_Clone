extends layout
include utils.pug
append head
  //- add page specific styles by appending to the head
  link(rel="stylesheet" href="/stylesheets/index.css")
  //- add page specific js
  script(src="/javascripts/index.js" type="module" defer)

block content
  div(id='welcome_container')
        if locals.authenticated
          p Welcome #{locals.user.user_name}!
          form(method="post" action="/questions")
            input(type="hidden" name="_csrf" value=token)
            input(name="title" type="text" placeholder="What is your question?" required)
            button(id="welcome-submit-btn" type="submit") Submit

  a(href='/my-questions') My Questions
  a(href='/my-answers') My Answers

  h1= title
  if questions && questions.length > 0
    each question in questions
      input(type='hidden' id= `questionid` value= question.id)
      //- input(type='hidden' id= 'userid' value= user.id)
      div
        div= question.User.user_name
        div
          a(href=`/questions/${question.id}`) #{question.title}
        div
          button(class='upvote-question-button' id= `${question.id}`) Upvote
          div(class='vote_holder')= question.Questions_votes.length
        div
          button(class='answer' id=`${question.id}`) I want to answer!
        div(class='answerContain' id=`${question.id}`)
          form(action=`/questions/${question.id}/answers` method='post')
            input(type='hidden' name='_csrf' value=csrfToken)
            +field('Answer:', 'content')
            div
              button(type='submit') Submit
        div
          if question.Answers && question.Answers.length > 0
            each answer in question.Answers
              div= answer.User.user_name
              div= answer.content
              div
                button(class='upvote-answer-button' id=`${answer.id}`) Upvote
                div(class='answer_vote_holder')= answer.Answers_votes.length
        div= '*************************'
